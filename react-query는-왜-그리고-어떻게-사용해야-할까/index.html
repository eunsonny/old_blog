<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.3.3"/><meta name="description" content="우리가 이제껏 서버 데이터를 다루는 방식은요… 🫢 서버로부터 데이터를 받아온다state에 값을 저장하고 해당 값을 이용해 화면을 렌더링 한다.전역적으로 필요한 값의 경우에는 state가 아닌 전역상태관리(Ex. Redux, mobx…" data-gatsby-head="true"/><meta name="image" content="https://eunsonny.github.io/banner.jpg" data-gatsby-head="true"/><meta property="og:title" content="React-Query는 왜 그리고 어떻게 사용해야 할까? | Eunsonny&#x27;s Blog" data-gatsby-head="true"/><meta property="og:url" content="https://eunsonny.github.io/react-query는-왜-그리고-어떻게-사용해야-할까" data-gatsby-head="true"/><meta property="og:description" content="우리가 이제껏 서버 데이터를 다루는 방식은요… 🫢 서버로부터 데이터를 받아온다state에 값을 저장하고 해당 값을 이용해 화면을 렌더링 한다.전역적으로 필요한 값의 경우에는 state가 아닌 전역상태관리(Ex. Redux, mobx…" data-gatsby-head="true"/><meta property="og:image" content="https://eunsonny.github.io/banner.jpg" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:image:alt" content="우리가 이제껏 서버 데이터를 다루는 방식은요… 🫢 서버로부터 데이터를 받아온다state에 값을 저장하고 해당 값을 이용해 화면을 렌더링 한다.전역적으로 필요한 값의 경우에는 state가 아닌 전역상태관리(Ex. Redux, mobx…" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:title" content="React-Query는 왜 그리고 어떻게 사용해야 할까? | Eunsonny&#x27;s Blog" data-gatsby-head="true"/><meta name="twitter:url" content="https://eunsonny.github.io/react-query는-왜-그리고-어떻게-사용해야-할까" data-gatsby-head="true"/><meta name="twitter:description" content="우리가 이제껏 서버 데이터를 다루는 방식은요… 🫢 서버로부터 데이터를 받아온다state에 값을 저장하고 해당 값을 이용해 화면을 렌더링 한다.전역적으로 필요한 값의 경우에는 state가 아닌 전역상태관리(Ex. Redux, mobx…" data-gatsby-head="true"/><meta name="twitter:image" content="https://eunsonny.github.io/banner.jpg" data-gatsby-head="true"/><meta name="twitter:image:alt" content="우리가 이제껏 서버 데이터를 다루는 방식은요… 🫢 서버로부터 데이터를 받아온다state에 값을 저장하고 해당 값을 이용해 화면을 렌더링 한다.전역적으로 필요한 값의 경우에는 state가 아닌 전역상태관리(Ex. Redux, mobx…" data-gatsby-head="true"/><meta name="twitter:creator" content="@lekoarts_de" data-gatsby-head="true"/><meta name="gatsby-theme" content="@lekoarts/gatsby-theme-minimal-blog" data-gatsby-head="true"/><title data-gatsby-head="true">React-Query는 왜 그리고 어떻게 사용해야 할까? | Eunsonny&#x27;s Blog</title><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" data-gatsby-head="true"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" data-gatsby-head="true"/><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" data-gatsby-head="true"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="192x192" href="/android-chrome-192x192.png"/><link rel="apple-touch-icon" sizes="512x512" href="/android-chrome-512x512.png"/><link rel="alternate" type="application/rss+xml" title="Minimal Blog - @lekoarts/gatsby-theme-minimal-blog" href="/rss.xml"/></head><body><script>(function() { try {
  var mode = localStorage.getItem('theme-ui-color-mode');
  if (!mode) return
  document.documentElement.classList.add('theme-ui-' + mode);
} catch (e) {} })();</script><div id="___gatsby"><style data-emotion="css-global 6koz1s">html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#edf2f7;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;--theme-ui-colors-highlightLineBg:rgba(0, 0, 0, 0.035);--theme-ui-colors-plain-color:#393A34;--theme-ui-colors-plain-backgroundColor:#f6f8fa;--theme-ui-colors-comment-color:#999988;--theme-ui-colors-comment-fontStyle:italic;--theme-ui-colors-prolog-color:#999988;--theme-ui-colors-prolog-fontStyle:italic;--theme-ui-colors-doctype-color:#999988;--theme-ui-colors-doctype-fontStyle:italic;--theme-ui-colors-cdata-color:#999988;--theme-ui-colors-cdata-fontStyle:italic;--theme-ui-colors-namespace-opacity:0.7;--theme-ui-colors-string-color:#e3116c;--theme-ui-colors-attr-value-color:#e3116c;--theme-ui-colors-punctuation-color:#393A34;--theme-ui-colors-operator-color:#393A34;--theme-ui-colors-entity-color:#36acaa;--theme-ui-colors-url-color:#36acaa;--theme-ui-colors-symbol-color:#36acaa;--theme-ui-colors-number-color:#36acaa;--theme-ui-colors-boolean-color:#36acaa;--theme-ui-colors-variable-color:#36acaa;--theme-ui-colors-constant-color:#36acaa;--theme-ui-colors-property-color:#36acaa;--theme-ui-colors-regex-color:#36acaa;--theme-ui-colors-inserted-color:#36acaa;--theme-ui-colors-atrule-color:#00a4db;--theme-ui-colors-keyword-color:#00009f;--theme-ui-colors-attr-name-color:#00a4db;--theme-ui-colors-selector-color:#00009f;--theme-ui-colors-function-color:#d73a49;--theme-ui-colors-deleted-color:#d73a49;--theme-ui-colors-tag-color:#00009f;--theme-ui-colors-function-variable-color:#6f42c1;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);}html.theme-ui-light,.theme-ui-light html{--theme-ui-colors-transparent:transparent;--theme-ui-colors-black:#000;--theme-ui-colors-white:#fff;--theme-ui-colors-gray-1:#f7fafc;--theme-ui-colors-gray-2:#edf2f7;--theme-ui-colors-gray-3:#e2e8f0;--theme-ui-colors-gray-4:#cbd5e0;--theme-ui-colors-gray-5:#a0aec0;--theme-ui-colors-gray-6:#718096;--theme-ui-colors-gray-7:#4a5568;--theme-ui-colors-gray-8:#2d3748;--theme-ui-colors-gray-9:#1a202c;--theme-ui-colors-red-1:#fff5f5;--theme-ui-colors-red-2:#fed7d7;--theme-ui-colors-red-3:#feb2b2;--theme-ui-colors-red-4:#fc8181;--theme-ui-colors-red-5:#f56565;--theme-ui-colors-red-6:#e53e3e;--theme-ui-colors-red-7:#c53030;--theme-ui-colors-red-8:#9b2c2c;--theme-ui-colors-red-9:#742a2a;--theme-ui-colors-orange-1:#fffaf0;--theme-ui-colors-orange-2:#feebc8;--theme-ui-colors-orange-3:#fbd38d;--theme-ui-colors-orange-4:#f6ad55;--theme-ui-colors-orange-5:#ed8936;--theme-ui-colors-orange-6:#dd6b20;--theme-ui-colors-orange-7:#c05621;--theme-ui-colors-orange-8:#9c4221;--theme-ui-colors-orange-9:#7b341e;--theme-ui-colors-yellow-1:#fffff0;--theme-ui-colors-yellow-2:#fefcbf;--theme-ui-colors-yellow-3:#faf089;--theme-ui-colors-yellow-4:#f6e05e;--theme-ui-colors-yellow-5:#ecc94b;--theme-ui-colors-yellow-6:#d69e2e;--theme-ui-colors-yellow-7:#b7791f;--theme-ui-colors-yellow-8:#975a16;--theme-ui-colors-yellow-9:#744210;--theme-ui-colors-green-1:#f0fff4;--theme-ui-colors-green-2:#c6f6d5;--theme-ui-colors-green-3:#9ae6b4;--theme-ui-colors-green-4:#68d391;--theme-ui-colors-green-5:#48bb78;--theme-ui-colors-green-6:#38a169;--theme-ui-colors-green-7:#2f855a;--theme-ui-colors-green-8:#276749;--theme-ui-colors-green-9:#22543d;--theme-ui-colors-teal-1:#e6fffa;--theme-ui-colors-teal-2:#b2f5ea;--theme-ui-colors-teal-3:#81e6d9;--theme-ui-colors-teal-4:#4fd1c5;--theme-ui-colors-teal-5:#38b2ac;--theme-ui-colors-teal-6:#319795;--theme-ui-colors-teal-7:#2c7a7b;--theme-ui-colors-teal-8:#285e61;--theme-ui-colors-teal-9:#234e52;--theme-ui-colors-blue-1:#ebf8ff;--theme-ui-colors-blue-2:#bee3f8;--theme-ui-colors-blue-3:#90cdf4;--theme-ui-colors-blue-4:#63b3ed;--theme-ui-colors-blue-5:#4299e1;--theme-ui-colors-blue-6:#3182ce;--theme-ui-colors-blue-7:#2b6cb0;--theme-ui-colors-blue-8:#2c5282;--theme-ui-colors-blue-9:#2a4365;--theme-ui-colors-indigo-1:#ebf4ff;--theme-ui-colors-indigo-2:#c3dafe;--theme-ui-colors-indigo-3:#a3bffa;--theme-ui-colors-indigo-4:#7f9cf5;--theme-ui-colors-indigo-5:#667eea;--theme-ui-colors-indigo-6:#5a67d8;--theme-ui-colors-indigo-7:#4c51bf;--theme-ui-colors-indigo-8:#434190;--theme-ui-colors-indigo-9:#3c366b;--theme-ui-colors-purple-1:#faf5ff;--theme-ui-colors-purple-2:#e9d8fd;--theme-ui-colors-purple-3:#d6bcfa;--theme-ui-colors-purple-4:#b794f4;--theme-ui-colors-purple-5:#9f7aea;--theme-ui-colors-purple-6:#805ad5;--theme-ui-colors-purple-7:#6b46c1;--theme-ui-colors-purple-8:#553c9a;--theme-ui-colors-purple-9:#44337a;--theme-ui-colors-pink-1:#fff5f7;--theme-ui-colors-pink-2:#fed7e2;--theme-ui-colors-pink-3:#fbb6ce;--theme-ui-colors-pink-4:#f687b3;--theme-ui-colors-pink-5:#ed64a6;--theme-ui-colors-pink-6:#d53f8c;--theme-ui-colors-pink-7:#b83280;--theme-ui-colors-pink-8:#97266d;--theme-ui-colors-pink-9:#702459;--theme-ui-colors-grayDark:#2d3748;--theme-ui-colors-text:#2d3748;--theme-ui-colors-background:#fff;--theme-ui-colors-primary:#6b46c1;--theme-ui-colors-primaryHover:#2c5282;--theme-ui-colors-secondary:#5f6c80;--theme-ui-colors-muted:#edf2f7;--theme-ui-colors-success:#9ae6b4;--theme-ui-colors-info:#63b3ed;--theme-ui-colors-warning:#faf089;--theme-ui-colors-danger:#feb2b2;--theme-ui-colors-light:#f7fafc;--theme-ui-colors-dark:#2d3748;--theme-ui-colors-textMuted:#718096;--theme-ui-colors-toggleIcon:#2d3748;--theme-ui-colors-heading:#000;--theme-ui-colors-divide:#cbd5e0;--theme-ui-colors-highlightLineBg:rgba(0, 0, 0, 0.035);--theme-ui-colors-plain-color:#393A34;--theme-ui-colors-plain-backgroundColor:#f6f8fa;--theme-ui-colors-comment-color:#999988;--theme-ui-colors-comment-fontStyle:italic;--theme-ui-colors-prolog-color:#999988;--theme-ui-colors-prolog-fontStyle:italic;--theme-ui-colors-doctype-color:#999988;--theme-ui-colors-doctype-fontStyle:italic;--theme-ui-colors-cdata-color:#999988;--theme-ui-colors-cdata-fontStyle:italic;--theme-ui-colors-namespace-opacity:0.7;--theme-ui-colors-string-color:#e3116c;--theme-ui-colors-attr-value-color:#e3116c;--theme-ui-colors-punctuation-color:#393A34;--theme-ui-colors-operator-color:#393A34;--theme-ui-colors-entity-color:#36acaa;--theme-ui-colors-url-color:#36acaa;--theme-ui-colors-symbol-color:#36acaa;--theme-ui-colors-number-color:#36acaa;--theme-ui-colors-boolean-color:#36acaa;--theme-ui-colors-variable-color:#36acaa;--theme-ui-colors-constant-color:#36acaa;--theme-ui-colors-property-color:#36acaa;--theme-ui-colors-regex-color:#36acaa;--theme-ui-colors-inserted-color:#36acaa;--theme-ui-colors-atrule-color:#00a4db;--theme-ui-colors-keyword-color:#00009f;--theme-ui-colors-attr-name-color:#00a4db;--theme-ui-colors-selector-color:#00009f;--theme-ui-colors-function-color:#d73a49;--theme-ui-colors-deleted-color:#d73a49;--theme-ui-colors-tag-color:#00009f;--theme-ui-colors-function-variable-color:#6f42c1;}html.theme-ui-dark,.theme-ui-dark html{--theme-ui-colors-text:#cbd5e0;--theme-ui-colors-primary:#b794f4;--theme-ui-colors-secondary:#8a9ab0;--theme-ui-colors-toggleIcon:#cbd5e0;--theme-ui-colors-background:#1A202C;--theme-ui-colors-heading:#fff;--theme-ui-colors-divide:#2d3748;--theme-ui-colors-muted:#2d3748;--theme-ui-colors-highlightLineBg:rgba(255, 255, 255, 0.1);--theme-ui-colors-plain-color:#9CDCFE;--theme-ui-colors-plain-backgroundColor:#1E1E1E;--theme-ui-colors-prolog-color:rgb(0, 0, 128);--theme-ui-colors-comment-color:rgb(106, 153, 85);--theme-ui-colors-builtin-color:rgb(86, 156, 214);--theme-ui-colors-changed-color:rgb(86, 156, 214);--theme-ui-colors-keyword-color:rgb(86, 156, 214);--theme-ui-colors-interpolation-punctuation-color:rgb(86, 156, 214);--theme-ui-colors-number-color:rgb(181, 206, 168);--theme-ui-colors-inserted-color:rgb(181, 206, 168);--theme-ui-colors-constant-color:rgb(100, 102, 149);--theme-ui-colors-attr-name-color:rgb(156, 220, 254);--theme-ui-colors-variable-color:rgb(156, 220, 254);--theme-ui-colors-deleted-color:rgb(206, 145, 120);--theme-ui-colors-string-color:rgb(206, 145, 120);--theme-ui-colors-attr-value-color:rgb(206, 145, 120);--theme-ui-colors-template-punctuation-color:rgb(206, 145, 120);--theme-ui-colors-selector-color:rgb(215, 186, 125);--theme-ui-colors-tag-color:rgb(86, 156, 214);--theme-ui-colors-punctuation-color:#808080;--theme-ui-colors-operator-color:rgb(212, 212, 212);--theme-ui-colors-function-color:rgb(220, 220, 170);--theme-ui-colors-class-name-color:rgb(78, 201, 176);--theme-ui-colors-char-color:rgb(209, 105, 105);}</style><style data-emotion="css-global 1w2pyfm">*{box-sizing:border-box;}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";line-height:1.625;font-weight:400;color:var(--theme-ui-colors-text);background-color:var(--theme-ui-colors-background);margin:0;padding:0;box-sizing:border-box;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}body{margin:0;}</style><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css-global h7esfd">*{box-sizing:inherit;}html{-webkit-text-size-adjust:100%;}img{border-style:none;}pre{font-family:monospace;font-size:1em;}[hidden]{display:none;}::selection{background-color:var(--theme-ui-colors-text);color:var(--theme-ui-colors-background);}a{-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;color:text;}</style><style data-emotion="css 1gq7j3t">.css-1gq7j3t{border:0;clip:react(0 0 0 0);height:1px;width:1px;margin:-1px;padding:0;overflow:hidden;position:absolute;}.css-1gq7j3t:focus{padding:1rem;position:fixed;top:15px;left:15px;background-color:var(--theme-ui-colors-heading);color:var(--theme-ui-colors-background);z-index:1;width:auto;height:auto;clip:auto;-webkit-text-decoration:none;text-decoration:none;}</style><a href="#skip-nav" data-skip-link="true" class="css-1gq7j3t">Skip to content</a><style data-emotion="css 10f80pj">.css-10f80pj{box-sizing:border-box;margin:0;min-width:0;width:100%;max-width:container;margin-left:auto;margin-right:auto;padding:1rem;max-width:1024px;}@media screen and (min-width: 640px){.css-10f80pj{padding:2rem;}}</style><div class="css-10f80pj"><style data-emotion="css egutgn">.css-egutgn{margin-bottom:4rem;}@media screen and (min-width: 640px){.css-egutgn{margin-bottom:8rem;}}</style><header class="css-egutgn"><style data-emotion="css 1xwyizx">.css-1xwyizx{-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><style data-emotion="css 1pbimyf">.css-1pbimyf{box-sizing:border-box;margin:0;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;}</style><div class="css-1pbimyf"><style data-emotion="css uxjqfw">.css-uxjqfw{color:var(--theme-ui-colors-heading);-webkit-text-decoration:none;text-decoration:none;}</style><a aria-label="Eunsonny&#x27;s Blog - Back to home" class="css-uxjqfw" href="/"><style data-emotion="css 19i8ga6">.css-19i8ga6{margin-top:0;margin-bottom:0;font-weight:600;font-size:1.5rem;}@media screen and (min-width: 640px){.css-19i8ga6{font-size:1.875rem;}}</style><div class="css-19i8ga6">Eunsonny&#x27;s Blog</div></a><style data-emotion="css 3ba0x7">.css-3ba0x7{opacity:0.65;position:relative;border-radius:4px;width:40px;height:25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-transition:opacity 0.3s ease;transition:opacity 0.3s ease;border:none;outline:none;background:none;cursor:pointer;padding:0;-webkit-appearance:none;-moz-appearance:none;-ms-appearance:none;appearance:none;}.css-3ba0x7:hover,.css-3ba0x7:focus{opacity:1;}</style><button type="button" class="css-3ba0x7"><style data-emotion="css 1ggalm8">.css-1ggalm8{position:relative;width:24px;height:24px;border-radius:50%;-webkit-transition:all 0.45s ease;transition:all 0.45s ease;-webkit-transform:scale(0.55);-moz-transform:scale(0.55);-ms-transform:scale(0.55);transform:scale(0.55);}.css-1ggalm8:before{content:"";position:absolute;right:-9px;top:-9px;height:24px;width:24px;-webkit-transition:-webkit-transform 0.45s ease;transition:transform 0.45s ease;border-radius:50%;opacity:0;}.css-1ggalm8:after{content:"";width:8px;height:8px;border-radius:50%;margin:-4px 0 0 -4px;position:absolute;top:50%;left:50%;-webkit-transition:all 0.35s ease;transition:all 0.35s ease;box-shadow:0 -23px 0 var(--theme-ui-colors-toggleIcon),0 23px 0 var(--theme-ui-colors-toggleIcon),23px 0 0 var(--theme-ui-colors-toggleIcon),-23px 0 0 var(--theme-ui-colors-toggleIcon),15px 15px 0 var(--theme-ui-colors-toggleIcon),-15px 15px 0 var(--theme-ui-colors-toggleIcon),15px -15px 0 var(--theme-ui-colors-toggleIcon),-15px -15px 0 var(--theme-ui-colors-toggleIcon);-webkit-transform:scale(0);-moz-transform:scale(0);-ms-transform:scale(0);transform:scale(0);}</style><div class="css-1ggalm8"></div></button></div><style data-emotion="css fp1v3n">.css-fp1v3n{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;border-bottom-style:solid;border-bottom-width:1px;border-bottom-color:var(--theme-ui-colors-divide);padding-bottom:1rem;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:1rem;color:var(--theme-ui-colors-secondary);-webkit-box-flex-flow:wrap;-webkit-flex-flow:wrap;-ms-flex-flow:wrap;flex-flow:wrap;}.css-fp1v3n a{color:var(--theme-ui-colors-secondary);}.css-fp1v3n a:hover{color:var(--theme-ui-colors-heading);}</style><div class="css-fp1v3n"><style data-emotion="css 1lx5s1f">.css-1lx5s1f{font-size:1rem;}.css-1lx5s1f a:not(:last-of-type){margin-right:1rem;}@media screen and (min-width: 640px){.css-1lx5s1f{font-size:18px;}}.css-1lx5s1f .active{color:var(--theme-ui-colors-heading);}</style><nav class="css-1lx5s1f"><style data-emotion="css bpdkdn">.css-bpdkdn{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-bpdkdn:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a class="css-bpdkdn" href="/blog">Blog</a><a class="css-bpdkdn" href="/about">About</a></nav><style data-emotion="css 45ghvz">.css-45ghvz{font-size:1rem;}.css-45ghvz a:not(:first-of-type){margin-left:1rem;}@media screen and (min-width: 640px){.css-45ghvz{font-size:18px;}}</style><div class="css-45ghvz"><style data-emotion="css aizfxq">.css-aizfxq{box-sizing:border-box;margin:0;min-width:0;color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-aizfxq:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://github.com/eunsonny" class="css-aizfxq">Github</a></div></div></header><style data-emotion="css ayxunm">.css-ayxunm .prism-code{font-size:1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width: 640px){.css-ayxunm .prism-code{font-size:1rem;}}@media screen and (min-width: 768px){.css-ayxunm .prism-code{font-size:1.25rem;}}.css-ayxunm .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-ayxunm .gatsby-highlight[data-language='none'] .code-content,.css-ayxunm .gatsby-highlight[data-language=''] .code-content{padding-top:1rem;}.css-ayxunm .code-content{padding:2rem 1rem 1rem 1rem;color:var(--theme-ui-colors-plain-color);background-color:var(--theme-ui-colors-plain-backgroundColor);font-size:0.75em;font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;}.css-ayxunm .token{display:inline-block;}.css-ayxunm p>code,.css-ayxunm li>code{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-heading);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:4px;font-size:0.95em;}.css-ayxunm .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;border-radius:4px;overflow:hidden;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-ayxunm .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-ayxunm .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-ayxunm .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-ayxunm .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-ayxunm .gatsby-highlight pre code{float:left;min-width:100%;}.css-ayxunm .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white);border-radius:0 0 4px 4px;color:var(--theme-ui-colors-black);font-size:12px;letter-spacing:0.035rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;}.css-ayxunm .gatsby-highlight pre[class~="language-javascript"]:before,.css-ayxunm .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black);}.css-ayxunm .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-ayxunm .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black);}.css-ayxunm .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-ayxunm .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white);}.css-ayxunm .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white);}.css-ayxunm .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white);}.css-ayxunm .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-ayxunm .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black);}.css-ayxunm .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black);}.css-ayxunm .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black);}.css-ayxunm .gatsby-highlight pre[class~="language-py"]:before,.css-ayxunm .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white);}.css-ayxunm .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-ayxunm .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-ayxunm .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-ayxunm .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-ayxunm .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-ayxunm .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-ayxunm .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-ayxunm .gatsby-highlight pre[class~='language-json']:before,.css-ayxunm .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-ayxunm .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-ayxunm .gatsby-highlight>code[class*="language-"],.css-ayxunm .gatsby-highlight>pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-ayxunm .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-ayxunm .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary);}.css-ayxunm .gatsby-highlight pre::-webkit-scrollbar-track{background:var(--theme-ui-colors-muted);}.css-ayxunm .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-ayxunm .code-title{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-text);font-size:1rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";}.css-ayxunm .token-line{padding-right:1rem;}.css-ayxunm .highlight-line{border-left:4px solid rgb(2, 155, 206);}.css-ayxunm .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}</style><style data-emotion="css 1mtsm65">.css-1mtsm65{box-sizing:border-box;margin:0;min-width:0;}.css-1mtsm65 .prism-code{font-size:1rem;webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-transparent);min-width:100%;margin-bottom:0;margin-top:0;overflow:auto;}@media screen and (min-width: 640px){.css-1mtsm65 .prism-code{font-size:1rem;}}@media screen and (min-width: 768px){.css-1mtsm65 .prism-code{font-size:1.25rem;}}.css-1mtsm65 .prism-code[data-linenumber="false"] .token-line{padding-left:1rem;}.css-1mtsm65 .gatsby-highlight[data-language='none'] .code-content,.css-1mtsm65 .gatsby-highlight[data-language=''] .code-content{padding-top:1rem;}.css-1mtsm65 .code-content{padding:2rem 1rem 1rem 1rem;color:var(--theme-ui-colors-plain-color);background-color:var(--theme-ui-colors-plain-backgroundColor);font-size:0.75em;font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;}.css-1mtsm65 .token{display:inline-block;}.css-1mtsm65 p>code,.css-1mtsm65 li>code{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-heading);padding-left:0.5rem;padding-right:0.5rem;padding-top:0.25rem;padding-bottom:0.25rem;border-radius:4px;font-size:0.95em;}.css-1mtsm65 .gatsby-highlight{font-size:1rem;position:relative;webkit-overflow-scrolling:touch;border-radius:4px;overflow:hidden;margin-left:0;margin-right:0;}@media screen and (min-width: 640px){.css-1mtsm65 .gatsby-highlight{font-size:1rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 768px){.css-1mtsm65 .gatsby-highlight{font-size:1.25rem;margin-left:0;margin-right:0;}}@media screen and (min-width: 1024px){.css-1mtsm65 .gatsby-highlight{margin-left:-1rem;margin-right:-1rem;}}.css-1mtsm65 .gatsby-highlight .token-line{margin-left:-1rem;margin-right:-1rem;min-width:100%;}.css-1mtsm65 .gatsby-highlight pre code{float:left;min-width:100%;}.css-1mtsm65 .gatsby-highlight pre[class*="language-"]:before{background-color:var(--theme-ui-colors-white);border-radius:0 0 4px 4px;color:var(--theme-ui-colors-black);font-size:12px;letter-spacing:0.035rem;padding:0.1rem 0.5rem;position:absolute;left:1rem;text-align:right;text-transform:uppercase;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-weight:600;}.css-1mtsm65 .gatsby-highlight pre[class~="language-javascript"]:before,.css-1mtsm65 .gatsby-highlight pre[class~="language-js"]:before{content:"js";background:#f7df1e;color:var(--theme-ui-colors-black);}.css-1mtsm65 .gatsby-highlight pre[class~="language-jsx"]:before{content:"jsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1mtsm65 .gatsby-highlight pre[class~="language-ts"]:before{content:"ts";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1mtsm65 .gatsby-highlight pre[class~="language-tsx"]:before{content:"tsx";background:#61dafb;color:var(--theme-ui-colors-black);}.css-1mtsm65 .gatsby-highlight pre[class~="language-html"]:before{content:"html";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1mtsm65 .gatsby-highlight pre[class~="language-xml"]:before{content:"xml";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1mtsm65 .gatsby-highlight pre[class~="language-svg"]:before{content:"svg";background:#005a9c;color:var(--theme-ui-colors-white);}.css-1mtsm65 .gatsby-highlight pre[class~="language-graphql"]:before{content:"GraphQL";background:#E10098;}.css-1mtsm65 .gatsby-highlight pre[class~="language-css"]:before{content:"css";background:#ff9800;color:var(--theme-ui-colors-black);}.css-1mtsm65 .gatsby-highlight pre[class~="language-mdx"]:before{content:"mdx";background:#f9ac00;color:var(--theme-ui-colors-black);}.css-1mtsm65 .gatsby-highlight pre[class~="language-php"]:before{content:"php";background:#777bb3;color:var(--theme-ui-colors-black);}.css-1mtsm65 .gatsby-highlight pre[class~="language-py"]:before,.css-1mtsm65 .gatsby-highlight pre[class~="language-python"]:before{content:"py";background:#306998;color:var(--theme-ui-colors-white);}.css-1mtsm65 .gatsby-highlight pre[class~="language-text"]:before{content:"text";}.css-1mtsm65 .gatsby-highlight pre[class~='language-shell']:before{content:'shell';}.css-1mtsm65 .gatsby-highlight pre[class~='language-sh']:before{content:'sh';}.css-1mtsm65 .gatsby-highlight pre[class~='language-bash']:before{content:'bash';}.css-1mtsm65 .gatsby-highlight pre[class~='language-yaml']:before{content:'yaml';background:#ffa8df;}.css-1mtsm65 .gatsby-highlight pre[class~='language-yml']:before{content:'yml';background:#ffa8df;}.css-1mtsm65 .gatsby-highlight pre[class~='language-markdown']:before{content:'md';}.css-1mtsm65 .gatsby-highlight pre[class~='language-json']:before,.css-1mtsm65 .gatsby-highlight pre[class~='language-json5']:before{content:'json';background:linen;}.css-1mtsm65 .gatsby-highlight pre[class~='language-diff']:before{content:'diff';background:#e6ffed;}.css-1mtsm65 .gatsby-highlight>code[class*="language-"],.css-1mtsm65 .gatsby-highlight>pre[class=*="language-"]{word-spacing:normal;word-break:normal;overflow-wrap:normal;line-height:1.5;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;}.css-1mtsm65 .gatsby-highlight pre::-webkit-scrollbar{width:0.5rem;height:0.5rem;}.css-1mtsm65 .gatsby-highlight pre::-webkit-scrollbar-thumb{background-color:var(--theme-ui-colors-primary);}.css-1mtsm65 .gatsby-highlight pre::-webkit-scrollbar-track{background:var(--theme-ui-colors-muted);}.css-1mtsm65 .line-number-style{display:inline-block;width:3em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0.3;text-align:center;position:relative;}.css-1mtsm65 .code-title{background-color:var(--theme-ui-colors-muted);color:var(--theme-ui-colors-text);font-size:1rem;padding-left:1rem;padding-right:1rem;padding-top:0.5rem;padding-bottom:0.5rem;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";}.css-1mtsm65 .token-line{padding-right:1rem;}.css-1mtsm65 .highlight-line{border-left:4px solid rgb(2, 155, 206);}.css-1mtsm65 .highlight-line .line-number-style{width:calc(3em - 4px);opacity:0.5;left:-2px;}</style><main id="skip-nav" class=" css-1mtsm65"><style data-emotion="css w1q1hj">.css-w1q1hj{box-sizing:border-box;margin:0;min-width:0;font-family:inherit;font-weight:700;line-height:1.25;font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.875rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-w1q1hj{font-size:2.25rem;}}@media screen and (min-width: 768px){.css-w1q1hj{font-size:2.25rem;}}@media screen and (min-width: 1024px){.css-w1q1hj{font-size:3rem;}}</style><h1 class="css-w1q1hj">React-Query는 왜 그리고 어떻게 사용해야 할까?</h1><style data-emotion="css 15ce8we">.css-15ce8we{color:var(--theme-ui-colors-secondary);margin-top:1rem;font-size:1rem;}.css-15ce8we a{color:var(--theme-ui-colors-secondary);}@media screen and (min-width: 640px){.css-15ce8we{font-size:1rem;}}@media screen and (min-width: 768px){.css-15ce8we{font-size:1.25rem;}}</style><p class="css-15ce8we"><time>19.04.2023</time> — <a class="css-bpdkdn" href="/tags/react-query">React-Query</a> — <span>19<!-- --> min read</span></p><style data-emotion="css 1mae7sn">.css-1mae7sn{margin-top:4rem;margin-bottom:4rem;}.css-1mae7sn .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;border-radius:4px;box-shadow:rgba(0, 0, 0, 0.1) 0px 16px 16px 0px,rgba(0, 0, 0, 0.1) 0px 8px 8px 0px,rgba(0, 0, 0, 0.1) 0px 4px 4px 0px;}@media screen and (min-width: 640px){.css-1mae7sn .gatsby-resp-image-wrapper{margin-top:2rem;margin-bottom:2rem;}}@media screen and (min-width: 768px){.css-1mae7sn .gatsby-resp-image-wrapper{margin-top:4rem;margin-bottom:4rem;}}.css-1mae7sn .gatsby-resp-image-wrapper .gatsby-resp-image-image{border-radius:4px;}.css-1mae7sn figure{margin:0;}.css-1mae7sn figure img{border-radius:4px;box-shadow:0 10px 15px -3px rgba(0, 0, 0, 0.1),0 4px 6px -2px rgba(0, 0, 0, 0.05);max-width:100%;}</style><section class="css-1mae7sn"><style data-emotion="css 90ntna">.css-90ntna{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-90ntna{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-90ntna{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-90ntna{font-size:2.25rem;}}</style><style data-emotion="css 1h962gv">.css-1h962gv{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.5rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-1h962gv{font-size:2.25rem;}}@media screen and (min-width: 640px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 768px){.css-1h962gv{font-size:1.875rem;}}@media screen and (min-width: 1024px){.css-1h962gv{font-size:2.25rem;}}</style><h2 class="css-1h962gv">우리가 이제껏 서버 데이터를 다루는 방식은요… 🫢</h2>
<style data-emotion="css rc057y">.css-rc057y li{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width: 640px){.css-rc057y li{font-size:1rem;}}@media screen and (min-width: 768px){.css-rc057y li{font-size:1.25rem;}}</style><style data-emotion="css 15vy6y4">.css-15vy6y4 li{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width: 640px){.css-15vy6y4 li{font-size:1rem;}}@media screen and (min-width: 768px){.css-15vy6y4 li{font-size:1.25rem;}}.css-15vy6y4 li{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;}@media screen and (min-width: 640px){.css-15vy6y4 li{font-size:1rem;}}@media screen and (min-width: 768px){.css-15vy6y4 li{font-size:1.25rem;}}</style><ol class="css-15vy6y4">
<li class="css-zezy6m">서버로부터 데이터를 받아온다</li>
<li class="css-zezy6m">state에 값을 저장하고 해당 값을 이용해 화면을 렌더링 한다.</li>
<li class="css-zezy6m">전역적으로 필요한 값의 경우에는 state가 아닌 전역상태관리(Ex. Redux, mobx, recoil 등)의 store에 저장하여 값을 다룬다.</li>
<li class="css-zezy6m">필요에 따라 state(또는 store)에 담긴 상태 값을 업데이트 해 가면서 사용한다.</li>
</ol>
<h2 class="css-1h962gv">이제껏 이렇게 잘 써왔는데 무슨 문제가 있을까 🤔?</h2>
<style data-emotion="css 11bn2j6">.css-11bn2j6{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-11bn2j6{font-size:1.5rem;}}@media screen and (min-width: 768px){.css-11bn2j6{font-size:1.5rem;}}@media screen and (min-width: 1024px){.css-11bn2j6{font-size:1.875rem;}}</style><style data-emotion="css ns8t27">.css-ns8t27{font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);font-family:inherit;font-weight:700;line-height:1.25;margin:0;margin-bottom:0.25rem;font-size:1.25rem;margin-top:2rem;color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 768px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 1024px){.css-ns8t27{font-size:1.875rem;}}@media screen and (min-width: 640px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 768px){.css-ns8t27{font-size:1.5rem;}}@media screen and (min-width: 1024px){.css-ns8t27{font-size:1.875rem;}}</style><h3 class="css-ns8t27">1. Single Source of Truth</h3>
<style data-emotion="css 16ppxvj">.css-16ppxvj{background-color:var(--theme-ui-colors-muted);border-left-color:var(--theme-ui-colors-primary);border-left-style:solid;border-left-width:4px;padding-top:1px;padding-bottom:1px;margin-left:0;margin-right:0;padding-left:2rem;}.css-16ppxvj p{font-style:italic;}</style><style data-emotion="css utg5bh">.css-utg5bh{background-color:var(--theme-ui-colors-muted);border-left-color:var(--theme-ui-colors-primary);border-left-style:solid;border-left-width:4px;padding-top:1px;padding-bottom:1px;margin-left:0;margin-right:0;padding-left:2rem;background-color:var(--theme-ui-colors-muted);border-left-color:var(--theme-ui-colors-primary);border-left-style:solid;border-left-width:4px;padding-top:1px;padding-bottom:1px;margin-left:0;margin-right:0;padding-left:2rem;}.css-utg5bh p{font-style:italic;}.css-utg5bh p{font-style:italic;}</style><blockquote class="css-utg5bh">
<style data-emotion="css vehe2z">.css-vehe2z{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;}@media screen and (min-width: 640px){.css-vehe2z{font-size:1rem;}}@media screen and (min-width: 768px){.css-vehe2z{font-size:1.25rem;}}</style><style data-emotion="css z0logh">.css-z0logh{font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;font-size:1rem;letter-spacing:-0.003em;line-height:1.625;--baseline-multiplier:0.179;--x-height-multiplier:0.35;word-break:break-word;}@media screen and (min-width: 640px){.css-z0logh{font-size:1rem;}}@media screen and (min-width: 768px){.css-z0logh{font-size:1.25rem;}}@media screen and (min-width: 640px){.css-z0logh{font-size:1rem;}}@media screen and (min-width: 768px){.css-z0logh{font-size:1.25rem;}}</style><p class="css-z0logh"><strong class="css-zezy6m">For each unique piece of state, you will choose the component that “owns” it.</strong> This principle is also known as having a <style data-emotion="css 1d2wwf6">.css-1d2wwf6{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-1d2wwf6:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><style data-emotion="css 1diwg7s">.css-1diwg7s{color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;color:var(--theme-ui-colors-primary);-webkit-text-decoration:none;text-decoration:none;}.css-1diwg7s:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-1diwg7s:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="https://en.wikipedia.org/wiki/Single_source_of_truth" class="css-1diwg7s">“single source of truth”.</a> It doesn’t mean that all state lives in one place—but that for <em class="css-zezy6m">each</em> piece of state, there is a <em class="css-zezy6m">specific</em> component that holds that piece of information. Instead of duplicating shared state between components, <em class="css-zezy6m">lift it up</em> to their common shared parent, and <em class="css-zezy6m">pass it down</em> to the children that need it.</p>
</blockquote>
<p class="css-z0logh"><a href="https://react.dev/learn/sharing-state-between-components" class="css-1diwg7s">https://react.dev/learn/sharing-state-between-components</a></p>
<p class="css-z0logh">리액트는 각 각의 상태값이 **단일한 정보의 원천(Single Source of Truth)**이 될 것을 권장한다. 그러나 이 원칙은 자칫 잘못하면 어그러지기 십상이다.</p>
<p class="css-z0logh">구체적인 예를 들어보자 A 컴포넌트와 B 컴포넌트에서 동일하게 유저의 정보가 필요하다고 하자. 만약에 A와 B 컴포넌트에게 공통의 부모가 있다면 우리는 그 부모 컴포넌트에서 유저의 정보를 받아와 A와 B 컴포넌트에 props로 필요한 유저 정보를 내려줄 것이다. 그런데 만약 두 컴포넌트 사이 공통의 부모 컴포넌트가 없다면? 그리고 무지성 으로 A와 B 컴포넌트 각 각 유저정보를 호출하여 각자의 state에 담아 사용한다면? 그 순간 Single Source of Truth의 원칙은 깨지고 만다. 이 상태에서 더 나아가 각 각의 컴포넌트에서 유저 정보를 다른 형태로 업데이트하여 사용한다면, 과연 어떤 데이터가 가장 최신화된 현재의 상태 값인지를 신뢰하기 힘들어지게 된다.</p>
<p class="css-z0logh">그래서 우리는 Single Source of Truth와 같은 원칙을 지키고, props drilling과 같은 불편함을 없애기 위해 전역상태관리 시스템을 사용하게 된다. 서버의 데이터를 받아와 store에 저장해 놓고 어떤 컴포넌트이던 store의 값을 참조하게 되면 store라는 단일한 정보의 원천을 바라보게 되는 것이다.</p>
<p class="css-z0logh"><strong class="css-zezy6m">아니 그런데 잠깐! 이것으로 진짜 Single Source of Truth의 원칙이 지켜졌다고 볼 수 있을까?</strong></p>
<p class="css-z0logh">서버 데이터(Server state)가 서버를 떠나 클라이언트의 store(혹은 state)에 저장되는 순간 이 데이터는 원본이 아니라 서버 데이터의 복사본일 뿐이며 클라이언트의 상태 값으로 바뀌게 된다. 결국은 복사본이 되었다는 점에서 Store를 사용하는 방식도 진정한 단일한 정보의 원천이 맞는지에 대해 약간의 의문이 든다 🧐</p>
<h3 class="css-ns8t27">2. 보일러 플레이트 코드</h3>
<p class="css-z0logh">또한 우리는 전역 상태관리 시스템에서 서버에서 가져온 비동기 데이터를 관리하기 위해 거대한 보일러 플레이트 코드를 작성해야 하기도 했다.</p>
<style data-emotion="css igtsiw">.css-igtsiw{background-color:var(--theme-ui-colors-muted);border:0;height:1px;margin:1rem;margin-left:0;margin-right:0;}</style><style data-emotion="css 1ve732v">.css-1ve732v{background-color:var(--theme-ui-colors-muted);border:0;height:1px;margin:1rem;margin-left:0;margin-right:0;background-color:var(--theme-ui-colors-muted);border:0;height:1px;margin:1rem;margin-left:0;margin-right:0;}</style><hr class="css-1ve732v"/>
<h2 class="css-1h962gv">그래서 React-Query는요!</h2>
<p class="css-z0logh">리액트 쿼리는 이러한 기존의 상태값 관리에서 나아가 새로운 관점을 주장한다.</p>
<ul class="css-15vy6y4">
<li class="css-zezy6m">global state는 client와 Server로 분류할 수 있고, 이 두 state는 다른 방식으로 다뤄져야 효율적인 앱을 만들 수 있다.</li>
<li class="css-zezy6m">Server state: 서버에서 가져오는 데이터들도 하나의 상태이다!</li>
<li class="css-zezy6m">Server-State과 Client-State의 구분<!-- -->
<ul class="css-15vy6y4">
<li class="css-zezy6m">Client State : 세션간 지속적이지 않는 데이터, 동기적, 클라이언트가 소유, 항상 최신 데이터로 업데이트(렌더링에 반영)<!-- -->
<ul class="css-15vy6y4">
<li class="css-zezy6m">ex) 리액트 컴포넌트의 state, 동기적으로 저장되는 redux store의 데이터</li>
</ul>
</li>
<li class="css-zezy6m">Server State : 세션간 지속되는 데이터, 비동기적, 세션을 진행하는 클라이언트만 소유하는게 아니고 공유되는 데이터도 존재하며 여러 클라이언트에 의해 수정될 수 있음, 클라이언트에서는 서버 데이터의 스냅샷만을 사용하기 때문에 클라이언트에서 보이는 서버 데이터는 항상 최신임을 보장할 수 없음.<!-- -->
<ul class="css-15vy6y4">
<li class="css-zezy6m">ex) 리액트 앱에서는 비동기 요청으로 받아올 수 있는, 백엔드 DB에 저장되어있는 데이터</li>
</ul>
</li>
</ul>
</li>
</ul>
<p class="css-z0logh"><strong class="css-zezy6m">이러한 관점을 따른다면 우리는 상태 값을 다음과 같은 형태로 나누어 볼 수 있겠다.</strong></p>
<ul class="css-15vy6y4">
<li class="css-zezy6m">Server state: 서버에서 받아오는 데이터</li>
<li class="css-zezy6m">Client State<!-- -->
<ul class="css-15vy6y4">
<li class="css-zezy6m">local(UI) state: Input의 value, Checkbox의 선택 여부(checked), 모달을 숨겼다 보여주는 값 등 하나 또는 여러 개의 컴포넌트에서 다루는 상태 값</li>
<li class="css-zezy6m">Global State: 다수의 컴포넌트를 넘나들며 전역적으로 사용되는 상태 값. 전역상태관리의 Store에 담아 이용하는 값들이라고 볼 수 있겠다. ex.다크모드 여부, 고정된 Nav에서 보여져야 하는 상태 값, 로그인 여부 등</li>
<li class="css-zezy6m">URL State: URL에 포함된 상태 값. 쿼리 스트링, 쿼리 파라미터 값</li>
</ul>
</li>
</ul>
<h2 class="css-1h962gv">Stale-While-Revalidate 전략</h2>
<p class="css-z0logh">즉 react query는 Server state를 Client state와 분리하여 다룰 수 있게 해주는 툴이며, 보다 효과적으로 Server state를 다루기 위해 <code class="css-zezy6m">stale-while-revalidate</code> 전략(캐시 패러다임)을 사용하고 있다.</p>
<p class="css-z0logh"><code class="css-zezy6m">stale-while-revalidate</code> 는 <strong class="css-zezy6m">1) 캐시된 응답이 오래될 수 있다고 가정하는 부분</strong>과 <strong class="css-zezy6m">2) 그 캐시된 응답을 재검증하는 프로세스</strong> 두 부분으로 나뉜다.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="prism-code language-tsx" data-linenumber="false"><style data-emotion="css ce1lkk">.css-ce1lkk{background-color:var(--theme-ui-colors-background);border:none;color:var(--theme-ui-colors-text);cursor:pointer;font-size:14px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";letter-spacing:0.025rem;-webkit-transition:all 0.3s ease-in-out;transition:all 0.3s ease-in-out;position:absolute;right:0;z-index:1;border-radius:0 0 0 0.25rem;padding:0.25rem 0.6rem;}@media screen and (min-width: 640px){.css-ce1lkk{font-size:14px;}}@media screen and (min-width: 768px){.css-ce1lkk{font-size:16px;}}.css-ce1lkk[disabled]{cursor:not-allowed;}.css-ce1lkk:not([disabled]):hover{background-color:var(--theme-ui-colors-primary);color:var(--theme-ui-colors-white);}</style><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<style data-emotion="css 15vf505">.css-15vf505{border:0;clip:rect(0, 0, 0, 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;white-space:nowrap;width:1px;}</style><span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-tsx"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// HTTP Response Cache-Control Header</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token maybe-class-name">Cache</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">-</span><span class="token maybe-class-name">Control</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> max</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">-</span><span class="token plain">age</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token number" style="color:var(--theme-ui-colors-number-color)">1</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> stale</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">-</span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">while</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">-</span><span class="token plain">revalidate</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token number" style="color:var(--theme-ui-colors-number-color)">59</span></div></code></pre></div>
<ul class="css-15vy6y4">
<li class="css-zezy6m"><strong class="css-zezy6m">1) Cache-Control Header의 max-age를 확인</strong>
<ul class="css-15vy6y4">
<li class="css-zezy6m">아직 만료되지 않았으면 → Do nothing</li>
</ul>
</li>
<li class="css-zezy6m"><strong class="css-zezy6m">2) 만료되었으면 stale-while-revalidate 값을 확인</strong>
<ul class="css-15vy6y4">
<li class="css-zezy6m">stale-while-revalidate 값을 넘지 않았다면<!-- -->
<ul class="css-15vy6y4">
<li class="css-zezy6m">일단 캐싱된 값을 반환</li>
<li class="css-zezy6m">동시에 향후 사용을 위해 데이터를 요청하여 최신화</li>
</ul>
</li>
<li class="css-zezy6m">넘었다면<!-- -->
<ul class="css-15vy6y4">
<li class="css-zezy6m">데이터를 새로 요청해서 최신화</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 class="css-1h962gv">써보니 이런게 좋던데요😋?</h2>
<ul class="css-15vy6y4">
<li class="css-zezy6m">react Query는 서버 상태를 관리하는 레이어 전체를 추상화 시켜 개발자가 관리하는 앱 내의 상태에서 서버 상태를 제외한 UI 상태 에만 집중하여 개발할 수 있도록 했다.</li>
<li class="css-zezy6m">특히 비동기 로직을 쉽게 다룰 수 있다. (과거 redux saga같이 장황한 것들을 이용할 필요 없음) 작은 보일러 플레이트 코드로 사용할 수 있다.</li>
</ul>
<h2 class="css-1h962gv">중요한 기본사항들</h2>
<ul class="css-15vy6y4">
<li class="css-zezy6m">Query들은 4개의 상태를 가지며, useQuery가 반환하는 객체의 프로퍼티로 어떤 상태인지 확인이 가능하다.<!-- -->
<ol class="css-15vy6y4">
<li class="css-zezy6m"><code class="css-zezy6m">fresh</code> : 새롭게 추가된 쿼리 인스턴스 → active 상태의 시작, 기본 staleTime이 0이기 때문에 아무것도 설정을 안해주면 호출이 끝나고 바로 stale 상태로 변한다. staleTime을 늘려줄 경우 fresh한 상태가 유지되는데, 이때는 쿼리가 다시 마운트 되도 패칭이 발생하지 않고 기존의 fresh한 값을 반환한다.</li>
<li class="css-zezy6m"><code class="css-zezy6m">fetching</code> : 요청을 수행하는 중인 쿼리</li>
<li class="css-zezy6m"><code class="css-zezy6m">stale</code> : 인스턴스가 존재하지만 이미 패칭이 완료된 쿼리. 특정 쿼리가 stale된 상태에서 같은 쿼리 마운트를 시도한다면 캐싱된 데이터를 반환하면서 리패칭을 시도한다.</li>
<li class="css-zezy6m"><code class="css-zezy6m">inactive</code> : active 인스턴스가 하나도 없는 쿼리. inactive된 이후에도 cacheTime 동안 캐시된 데이터가 유지된다. cacheTime이 지나면 GC된다.</li>
</ol>
</li>
<li class="css-zezy6m">어떻게 inactive가 되는가? : 렌더링간에 다시 호출되지 않고 언마운트되는 쿼리들은 inactive가 된다.</li>
<li class="css-zezy6m">다음의 경우에 리패칭이 일어난다<!-- -->
<ol class="css-15vy6y4">
<li class="css-zezy6m">런타임에 stale인 특정 쿼리 인스턴스가 다시 만들어졌을 때 (refetchOnMount 옵션으로 끄고 키는게 가능)</li>
<li class="css-zezy6m">window가 다시 포커스가 되었을 때(refetchOnWindowFocus 옵션으로 끄고 키는게 가능)</li>
<li class="css-zezy6m">네트워크가 다시 연결 되었을 때(refetchOnReconnect 옵션으로 끄고 키는게 가능)</li>
<li class="css-zezy6m">refetch interval이 있을때 : 요청 실패한 쿼리는 디폴트로 3번 더 백그라운드단에서 요청하며, retry, retryDelay 옵션으로 간격과 횟수를 커스텀 가능하다.</li>
<li class="css-zezy6m">개발자가 직접 Mutation 등의 작업 이후 queryClient.invalidateQueries 를 사용해 수동으로 쿼리를 무효화 하여 revalidate 했을 때</li>
</ol>
</li>
</ul>
<h2 class="css-1h962gv">React-query의 라이프사이클</h2>
<ol class="css-15vy6y4">
<li class="css-zezy6m">&#x27;a&#x27; 쿼리 인스턴스가 mount 됨</li>
<li class="css-zezy6m">네트워크에서 데이터 fetching  하고 &#x27;a&#x27;라는 query key로 캐싱</li>
<li class="css-zezy6m">받아온 데이터는 fresh 상태에서 staleTime (default 0) 이후 stale 상태로 변경</li>
<li class="css-zezy6m">&#x27;a&#x27; 쿼리 인스턴스가 unmount 되고 쿼리의 상태 값이 inactive로 변경</li>
<li class="css-zezy6m">캐시는 inactive 상태에서 cacheTime (default 5 mins) 만큼 유지되고 그 이후엔 가비지 컬렉팅</li>
<li class="css-zezy6m">만일 cacheTime이 지나기 전에 &#x27;a&#x27; 쿼리 인스턴스가 새롭게 mount되면 refetching 되고 fresh한 값을 가져오는 동안 캐시된 데이터를 보여줌</li>
</ol>
<p class="css-z0logh">cf 1. 쿼리가 언마운트되거나 더 이상 사용하지 않을 때 ⇒ 마지막 인스턴스가 언마운트되어 inactive 상태가 되었을때 5분(cacheTime의 기본값)이 지나면 자동으로 삭제한다.</p>
<p class="css-z0logh">cf 2. cacheTime은 stateTime과 관계없이 무조건 inactive된 시점을 기준으로 캐시 데이터 삭제.</p>
<hr class="css-1ve732v"/>
<h2 class="css-1h962gv">React -query를 좀 더 현명하게 사용하는 방법들</h2>
<h3 class="css-ns8t27">:: 쉽게 변하지 않는 값을 한번만 받아와서 재 사용하고 싶을 때</h3>
<p class="css-z0logh">행정구역 정보, 국가 리스트 등 거의 변하지 않는 정보들은 처음 한번만 호출한 뒤 캐싱하여 재활용 할 수 있다.</p>
<aside><p class="css-z0logh">💡 staleTime: infinity, cacheTime: infinity로 설정한다.</p></aside>
<ul class="css-15vy6y4">
<li class="css-zezy6m">staleTime을 inifinity로 설정하게 되면, 데이터를 한번 받아오면 항상 fresh한 것으로 간주된다. cacheTime (default. 5mins) 내에 인스턴스가 언마운트 되었다가 다시 마운트 되면 데이터는 fresh 상태이기 때문에 refetch 하지 않는다.</li>
<li class="css-zezy6m">그러나 인스턴스가 언마운트 되고(쿼리가 inactive 상태로 변한다.), cacheTime이 지나면 가비지 컬렉팅  되기 때문에, 이 이후에 다시 마운트되면 refetch 된다.</li>
<li class="css-zezy6m">따라서 런타임 내내 처음 한번만 받아와 계속 사용하고 싶다면, staleTime, cacheTime 모두 infinity로 설정하면 된다.</li>
<li class="css-zezy6m">쿼리 값은 계속 fresh한 상태이며, cacheTime이 infinity이기 때문에 GC되지 않는다.</li>
</ul>
<h3 class="css-ns8t27">:: Invalidation</h3>
<ul class="css-15vy6y4">
<li class="css-zezy6m">useQuery를 이용해 <code class="css-zezy6m">queryKey: [’user’]</code> 의 정보를 받아온다 -&gt; user 정보가 캐싱된다.</li>
<li class="css-zezy6m">유저가 닉네임을 변경한다(mutation). -&gt; mutate가 성공하면 유저 정보가 변경되면서 캐싱되어 있던  <code class="css-zezy6m">queryKey: [’user’]</code> query의 상태가 stale 하게 변한다.</li>
<li class="css-zezy6m">이 경우, useQuery를 이용하여 <code class="css-zezy6m">queryKey: [’user’]</code>를 리패칭하려고 시도할 수 있으나 그러지 말고,</li>
<li class="css-zezy6m">invalidateQueries 메소드를 사용하여 개발자가 명시적으로 query가 stale되는 지점을 지정해 줄 수 있다. 해당 메소드가 호출되면 쿼리가 바로 stale되고, 리패치가 진행된다. Mutation 생명주기(onSuccess 옵션) 내에서 해주면 자연스럽다.</li>
</ul>
<div class="gatsby-highlight" data-language="jsx"><pre class="prism-code language-jsx" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-jsx"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token keyword module" style="color:var(--theme-ui-colors-keyword-color)">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token imports"> useMutation</span><span class="token imports punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token imports"> useQueryClient </span><span class="token imports punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"> </span><span class="token keyword module" style="color:var(--theme-ui-colors-keyword-color)">from</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;react-query&#x27;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">const</span><span class="token plain"> queryClient </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">useQueryClient</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// 뮤테이션이 성공한다면, 쿼리의 데이터를 invalidate해 관련된 쿼리가 리패치되도록 만든다.</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">const</span><span class="token plain"> mutation </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">useMutation</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">addTodo</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--theme-ui-colors-function-color)">onSuccess</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:var(--theme-ui-colors-operator-color)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    queryClient</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">invalidateQueries</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;user&#x27;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    queryClient</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">invalidateQueries</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;reminders&#x27;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span></div></code></pre></div>
<ul class="css-15vy6y4">
<li class="css-zezy6m">또한 mutation으로 요청 후 서버에서 받는 response값이 갱신된 새로운 데이터일 경우도 있다. 이럴때는 mutation을 성공했을 때 쿼리 데이터를 명시적으로 바꿔주는 queryClient 인스턴스의 setQueryData 메소드를 사용하면 좋다.</li>
</ul>
<div class="gatsby-highlight" data-language="jsx"><pre class="prism-code language-jsx" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-jsx"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">const</span><span class="token plain"> queryClient </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">useQueryClient</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">const</span><span class="token plain"> mutation </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">useMutation</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">editTodo</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--theme-ui-colors-function-color)">onSuccess</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:var(--theme-ui-colors-operator-color)">=&gt;</span><span class="token plain"> queryClient</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">setQueryData</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;todo&#x27;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:var(--theme-ui-colors-property-color)">id</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">5</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">mutation</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">mutate</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--theme-ui-colors-property-color)">id</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">5</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--theme-ui-colors-property-color)">name</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;Do the laundry&#x27;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// 뮤테이션의 response 값으로 업데이트된 data를 사용할 수 있다.</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> status</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> data</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> error </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">useQuery</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;todo&#x27;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> </span><span class="token literal-property property" style="color:var(--theme-ui-colors-property-color)">id</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">5</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> fetchTodoByID</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">;</span></div></code></pre></div>
<h3 class="css-ns8t27">:: initialData 활용하기</h3>
<p class="css-z0logh">initialData 옵션을 사용하면 <strong class="css-zezy6m">쿼리의 초기 데이터를 설정하고 초기 로딩 상태를 건너 뛸 수 있다</strong>. initialData는 캐시에도 유지되기 때문에, 불완전한 데이터를 제공하지 않는 것이 좋다. 불완전한 데이터의 경우에는 initialData가 아닌 placeholderData 옵션을 이용하자!</p>
<p class="css-z0logh">다른 쿼리의 캐시된 결과에서 쿼리의 초기 데이터를 제공할 수 있다. 예를 들어 할일 목록 쿼리에서 캐시된 데이터를 검색하여 개별 할일 항목을 찾은 다음 이를 개별 할일 쿼리의 초기 데이터로 사용하는 것을 좋은 예로 들 수 있다.</p>
<div class="gatsby-highlight" data-language="jsx"><pre class="prism-code language-jsx" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-jsx"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">const</span><span class="token plain"> result </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">useQuery</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token literal-property property" style="color:var(--theme-ui-colors-property-color)">queryKey</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;todo&#x27;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> todoId</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--theme-ui-colors-function-color)">queryFn</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:var(--theme-ui-colors-operator-color)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">fetch</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;/todos&#x27;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token function-variable function" style="color:var(--theme-ui-colors-function-color)">initialData</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:var(--theme-ui-colors-operator-color)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// Use a todo from the &#x27;todos&#x27; query as the initial data for this todo query</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">    </span><span class="token keyword control-flow" style="color:var(--theme-ui-colors-keyword-color)">return</span><span class="token plain"> queryClient</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">getQueryData</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;todos&#x27;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">?.</span><span class="token method function property-access" style="color:var(--theme-ui-colors-function-color)">find</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token parameter">d</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:var(--theme-ui-colors-operator-color)">=&gt;</span><span class="token plain"> d</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">===</span><span class="token plain"> todoId</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span></div></code></pre></div>
<h3 class="css-ns8t27">:: 에러   핸들링</h3>
<ul class="css-15vy6y4">
<li class="css-zezy6m">전역 onError를 세팅해두면, 에러 발생시 전역 onError에서 Catch된다.</li>
<li class="css-zezy6m">그러나 개별의 쿼리(useMutation, useQuery)에서 onError를 세팅해두면 개별 onError 핸들러가 동작하고 해당 에러는 이미 잡혔으므로 상위 스코프로 전파되지 않아, 전역 onError 는 동작하지 않는다.</li>
</ul>
<p class="css-z0logh">cf. 그러나 useMutation과 mutate 함수에 onError/onSuccess 핸들러를 각 각 세팅할 경우 두 개의 핸들러는 모두 동작한다. (그 중 useMutation에 설정된 핸들러가 먼저 동작하는 듯…)</p>
<h3 class="css-ns8t27">:: 쿼리 키를 의존성 배열로 생각하자</h3>
<p class="css-z0logh">그간 우리는 기본적으로 어떠한 비동기 호출을 명령형에 가까운 방식으로 처리해왔다. 그러나 react-query를 이용하면 <code class="css-zezy6m">이 비동기 요청은 state가 x인 경우의 결과물이다</code> 는 식의 선언형으로 호출할 수 있게 된다. 만약 state의 값이 바뀐다면 쿼리 키 배열의 변화를 감지하여 자동으로 새로운 요청을 보낸다.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="prism-code language-tsx" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-tsx"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> setState</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">useState</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token plain">data</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> setData</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">useState</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token function" style="color:var(--theme-ui-colors-function-color)">useEffect</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:var(--theme-ui-colors-operator-color)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">	</span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">const</span><span class="token plain"> res </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">fetchTodos</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">state</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">	</span><span class="token function" style="color:var(--theme-ui-colors-function-color)">setData</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">res</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token plain">state</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span></div></code></pre></div>
<div class="gatsby-highlight" data-language="tsx"><pre class="prism-code language-tsx" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-tsx"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">export</span><span class="token plain"> </span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:var(--theme-ui-colors-function-color)">useTodosQuery</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">state</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token maybe-class-name">State</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:var(--theme-ui-colors-operator-color)">=&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">useQuery</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;todos&#x27;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:var(--theme-ui-colors-operator-color)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">fetchTodos</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token plain">state</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span></div></code></pre></div>
<p class="css-z0logh">이러한 컨셉을 이해한다면 아래와 같이 <code class="css-zezy6m">refetch</code> 가 실행될 상황이나, 함수 인자로 특정 요청에 필요한 id를 넘기지 않게 될 것이다.</p>
<div class="gatsby-highlight" data-language="tsx"><pre class="prism-code language-tsx" data-linenumber="false"><button type="button" name="copy code to clipboard" class="code-copy-button css-ce1lkk">Copy<span aria-roledescription="status" class="css-15vf505">copy code to clipboard</span></button><code class="code-content language-tsx"><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// 잘못된 예시</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token keyword" style="color:var(--theme-ui-colors-keyword-color)">const</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> data</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> refetch </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token plain"> </span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">useQuery</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">[</span><span class="token string" style="color:var(--theme-ui-colors-string-color)">&#x27;item&#x27;</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">]</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">,</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:var(--theme-ui-colors-operator-color)">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">fetchItem</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> id</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">1</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">=</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:var(--theme-ui-colors-operator-color)">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token comment" style="color:var(--theme-ui-colors-comment-color);font-style:var(--theme-ui-colors-comment-fontStyle)">// 🚨 this is not how it works</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain">  </span><span class="token function" style="color:var(--theme-ui-colors-function-color)">refetch</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">(</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">{</span><span class="token plain"> id</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">:</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">2</span><span class="token plain"> </span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token plain"></span></div><div class="token-line" style="color:var(--theme-ui-colors-plain-color)"><span class="token plain"></span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">}</span><span class="token punctuation" style="color:var(--theme-ui-colors-punctuation-color)">)</span><span class="token operator" style="color:var(--theme-ui-colors-operator-color)">&gt;</span><span class="token maybe-class-name">Show</span><span class="token plain"> </span><span class="token maybe-class-name">Item</span><span class="token plain"> </span><span class="token number" style="color:var(--theme-ui-colors-number-color)">2</span><span class="token tag punctuation" style="color:var(--theme-ui-colors-punctuation-color)">&lt;/</span><span class="token tag" style="color:var(--theme-ui-colors-tag-color)">button</span><span class="token tag punctuation" style="color:var(--theme-ui-colors-punctuation-color)">&gt;</span></div></code></pre></div>
<p class="css-z0logh">데이터 요청이 state(<code class="css-zezy6m">id</code>)에 의존하도록 수정하는 것이 맞다.</p>
<p class="css-z0logh"><strong class="css-zezy6m">참고자료</strong></p></section></main><style data-emotion="css y7pay1">.css-y7pay1{box-sizing:border-box;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin-top:8rem;color:var(--theme-ui-colors-secondary);-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;border-top-style:solid;border-top-width:1px;border-top-color:var(--theme-ui-colors-divide);padding-top:1rem;}.css-y7pay1 a{color:var(--theme-ui-colors-secondary);-webkit-text-decoration:none;text-decoration:none;}.css-y7pay1 a:hover{color:var(--theme-ui-colors-heading);-webkit-text-decoration:underline;text-decoration:underline;}.css-y7pay1 a:focus{color:var(--theme-ui-colors-heading);}@media screen and (min-width: 640px){.css-y7pay1{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}}@media screen and (min-width: 768px){.css-y7pay1{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;}}</style><footer class="css-y7pay1"><div>© <!-- -->2023<!-- --> by <!-- -->Eunsonny&#x27;s Blog<!-- -->. All rights reserved.</div><div><a aria-label="Link to the theme&#x27;s GitHub repository" href="https://github.com/LekoArts/gatsby-themes/tree/main/themes/gatsby-theme-minimal-blog" class="css-aizfxq">Theme</a> <!-- -->by<!-- --> <a aria-label="Link to the theme author&#x27;s website" href="https://www.lekoarts.de?utm_source=minimal-blog&amp;utm_medium=Theme" class="css-aizfxq">LekoArts</a></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/react-query는-왜-그리고-어떻게-사용해야-할까";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-79d01c3b5a3514526712.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-blog-query-tsx-f0ee8bd63619c3b5455e.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-homepage-query-tsx-91691458c135934c2282.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-pages-about-index-md\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-page-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-pages-about-index-md-80e84ce3f84b1ebd3962.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-posts-browser-router-hash-router-index-md\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-posts-browser-router-hash-router-index-md-27692b1bd3bb79315116.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-posts-code-block-examples-index-md\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-posts-code-block-examples-index-md-d17dede70544466ef8fd.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-posts-markdown-reference-index-md\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-posts-markdown-reference-index-md-60c08859a6c0e037eb64.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-posts-normal-text-index-md\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-posts-normal-text-index-md-51c1db7c7d9541c7d994.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-posts-react-query-index-md\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-posts-react-query-index-md-b03aed6f91e8748da13e.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-posts-with-images-index-md\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-post-query-tsx-content-file-path-users-eunsonny-desktop-project-eunsonny-github-io-content-posts-with-images-index-md-9e8467d167afdee29892.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tag-query-tsx-a8ed39208ab0b973aafb.js\"],\"component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx\":[\"/component---node-modules-lekoarts-gatsby-theme-minimal-blog-core-src-templates-tags-query-tsx-220345a14bf74a74b282.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-9e146761255bd5630cb1.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="9292eff89cc8603cdc87";</script><script src="/webpack-runtime-eea01b387678402d707a.js" async></script><script src="/framework-25eed0ed85785bcb2fbd.js" async></script><script src="/app-79d01c3b5a3514526712.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>